- @congressmen.persons.each do |congressman|
  %div.row.result
    %div.col-md-1
      - if ! congressman.images.blank?
        - fantasy_name = Rack::Utils.escape(I18n.transliterate(congressman.name.gsub("'", "")))
        - if ! File.exist?('app/assets/images/'+fantasy_name+'.jpg')
          - image = Magick::ImageList.new
          - begin
            - timeout(2) do
              - url_image = open(congressman.images[0].url)
          - rescue Timeout::Error
            - url_image = open('http://placehold.it/200x200')
          - image.from_blob(url_image.read)
          - crop = image.crop(15,15,160,150)
          - crop.write('app/assets/images/'+fantasy_name+'.jpg')
        = image_tag(fantasy_name+'.jpg', class: "img-circle img-responsive hidden-xs")
        = image_tag(fantasy_name+'.jpg', class: "img-thumbnail img-responsive visible-xs")
      - else
        = image_tag('default-profile.png', class: "img-circle img-responsive hidden-xs")
        = image_tag('default-profile.png', class: "img-thumbnail img-responsive visible-xs")
    %div.col-md-11
      %div.row
        %div.col-md-11
          %h5
            = link_to congressman.name, congressman_path(congressman.id)
          - if ! congressman.title.blank?
            = congressman.title
          %p
            - if ! congressman.represent[0].region.blank?
              %span.light
                = t('congressmen.represent')
              = congressman.represent[0].region
        %div.col-md-1
          = link_to url_for(controller: "communications", action: "index", id: congressman.id) do
            %span.visible-xs
              = t('congressmen.askthem')
            %i.fa.fa-envelope-o.hidden-xs{title: t('congressmen.askthem')}
%div.pull-left
  - if ! @congressmen.prev_url.blank?
    = link_to congressmen_path + '/?page=' + (@congressmen.page - 1).to_s, :class => 'btn btn-default' do
      %i.fa.fa-long-arrow-left
      = t('pagination.previous')
%div.pull-right
  - if ! @congressmen.next_url.blank?
    - if @congressmen.has_more
      = link_to congressmen_path + '/?page=' + (@congressmen.page + 1).to_s, :class => 'btn btn-default' do
        = t('pagination.next')
        %i.fa.fa-long-arrow-right

- if @congressmen.persons.count == 0
  %p.text-center
    = t('search.there_are_no_results')