:javascript
  var billuid = '#{@bill.uid}';

  window.onload = function () {
    if(typeof window.generateGraph == 'function') {
      generateGraph(#{@date_freq});
    }
  }

%div
  %h3.page-header
    =@bill.title
%div.row
  %div.col-md-9
    %p{:style=>'font-style: italic; font-size:16px;'}
      =@bill.abstract
    %div.row
      %div.col-md-2
        %strong
          Boletín:
      %div.col-md-10
        =@bill.uid
    %div.row
      %div.col-md-2
        %strong
          Materias:
      %div.col-md-10
        %ul.list-inline
          - @matters = @bill.subject_areas
          =render partial: "matter", collection: @matters
    %div.row
      %div.col-md-2
        %strong
          Tags:
      %div.col-md-10
        %ul.list-inline
          - if !@bill.tags.blank?
            - @bill.tags.each do |tag|
              %li
                %span.label.label-info= tag
    %p
      %a{:href=>'#'}
        %i.fa.fa-download
        Descargar
    
  %div.col-md-3
    %div{:style=>'border: 1px solid #ccc; border-radius: 5px;'}
      %ul{:style=>'list-style:none;'}
        %li
          %i.fa.fa-bell
          Suscríbete
        %li
          %i.fa.fa-facebook
          Comparte
        %li
          %i.fa.fa-twitter
          %a{'href'=>'#', 'onclick' => "window.open('https://twitter.com/share?text="+@bill.title+"&hashtags=PMO','Twitter','width=500,height=280')"}
            Twitea
        %li
          %i.fa.fa-thumbs-up
            23
          %i.fa.fa-thumbs-down
            15

%div
  %h3.page-header
    Avances
  %canvas#myChartInt{'height'=>"80",'width'=>'750', 'style'=>'width:100%'}

%script{'src'=>"http://www.chartjs.org/assets/Chart.js"}

= javascript_include_tag 'svg/jquery.svg.min.js'
= javascript_include_tag 'svg/jquery.svgdom.min.js'
= javascript_include_tag 'svg/jquery.svganim.min.js'

:javascript
  window.onload = function(){
    
    var freq = #{@date_freq};
    generateGraph(freq,'myChartInt');

    $(".showmebutton").click(function(e) {
      e.preventDefault();
      $( ".showmecontent" ).toggle();
    });

    //svg animation
    $('svg.graph .points circle.plain').each( function(index) {
      // For each plain circle...
      $(this).on('mouseenter', function(event) {
        // Grow shadow point when mouse enters the point
        $(this).prev().stop(true, false ).animate( {
          svgR: 12,
          svgStrokeOpacity: 0,
          svgStrokeWidth: 0,
        }, 200 );
      }).on('mouseleave', function(event) {
        // Shrink shadow point when mouse leaves the point
        $(this).prev().stop(true, false ).animate( {
          svgR: 5,
          svgStrokeOpacity: 1,
          svgStrokeWidth: 4
        }, 200 );
      });
    });
  }


:css
  svg.graph {
    height: 500px;
    width: 800px;
  }

  svg.graph .grid {
    stroke: white;
    stroke-dasharray: 1 2;
    stroke-width: 1;
  }

  svg.graph .points {
    stroke: white;
    stroke-width: 3;
  }
  svg.graph .first_set {
    fill: #00554d;
  }

  svg.graph .surfaces {
    fill-opacity: 0.5;
  }

  svg.graph .grid.double {
    stroke-opacity: 0.4;
  }

  svg.graph .labels {
    font-family: Arial;
    font-size: 14px;
    kerning: 1;
  }

  svg.graph .labels.x-labels {
    text-anchor: middle;
  }

  svg.graph .labels.y-labels {
    text-anchor: end;
  }

%div
  %svg.graph{'version'=>'1.1', 'xmlns:xlink'=>"http://www.w3.org/1999/xlink", 'xmlns'=>"http://www.w3.org/2000/svg"}
    /radial gradient
    %defs
      %radialGradient#gradientShadow{'cx'=>'50%', 'cy'=>'50%', 'fx'=>'50%', 'fy'=>'50%', 'r'=>'55%'}
        %stop{'offset'=>'0%', 'style'=>'stop-color:rgb(0,0,0); stop-opacity:1'}
        %stop{'offset'=>'100%', 'style'=>'stop-color:#AAA; stop-opacity:0'}
    %g.grid.x-grid#xGrid
      %line{'x1'=>'113', 'x2'=>'113', 'y1'=>'10', 'y2'=>'380'}
      %line{'x1'=>'259', 'x2'=>'259', 'y1'=>'10', 'y2'=>'380'}
      %line{'x1'=>'405', 'x2'=>'405', 'y1'=>'10', 'y2'=>'380'}
      %line{'x1'=>'551', 'x2'=>'551', 'y1'=>'10', 'y2'=>'380'}
      %line{'x1'=>'697', 'x2'=>'697', 'y1'=>'10', 'y2'=>'380'}
    %g.grid.y-grid#yGrid
      %line{'x1'=>'86', 'x2'=>'697', 'y1'=>'10', 'y2'=>'10'}
      %line{'x1'=>'86', 'x2'=>'697', 'y1'=>'68', 'y2'=>'68'}
      %line{'x1'=>'86', 'x2'=>'697', 'y1'=>'126', 'y2'=>'126'}
      %line{'x1'=>'86', 'x2'=>'697', 'y1'=>'185', 'y2'=>'185'}
      %line{'x1'=>'86', 'x2'=>'697', 'y1'=>'243', 'y2'=>'243'}
      %line{'x1'=>'86', 'x2'=>'697', 'y1'=>'301', 'y2'=>'301'}
      %line{'x1'=>'86', 'x2'=>'697', 'y1'=>'360', 'y2'=>'360'}
    /surface
    %g.surfaces
      %path.first_set{'d'=>'M113,360 L113,360 L259,300 L405,179 L551,0 L697,204 L697,360 Z'}
    /grid lines
    %use.grid.double{'xlink:href'=>'#xGrid','style'=>''}
    %use.grid.double{'xlink:href'=>'#yGrid','style'=>''}
    /points
    %g.first_set.points{'data-setname'=>'set de datos'}
      %circle.shadow{'cx'=>'113', 'cy'=>'360', 'r'=>'5', 'stroke'=>'#AAA', 'stroke-width'=>"4", 'stroke-opacity'=>"1", 'style'=>"fill: url(#gradientShadow);"}
      %circle.plain{'cx'=>'113', 'cy'=>'360', 'data-value'=>'7', 'r'=>'5'}

      %circle.shadow{'cx'=>'259', 'cy'=>'300', 'r'=>'5', 'stroke'=>'#AAA', 'stroke-width'=>"4", 'stroke-opacity'=>"1", 'style'=>"fill: url(#gradientShadow);"}
      %circle.plain{'cx'=>'259', 'cy'=>'300', 'data-value'=>'5', 'r'=>'5'}

      %circle.shadow{'cx'=>'405', 'cy'=>'179', 'r'=>'5', 'stroke'=>'#AAA', 'stroke-width'=>"4", 'stroke-opacity'=>"1", 'style'=>"fill: url(#gradientShadow);"}
      %circle.plain{'cx'=>'405', 'cy'=>'179', 'data-value'=>'2', 'r'=>'5'}

      %circle.shadow{'cx'=>'551', 'cy'=>'0', 'r'=>'5', 'stroke'=>'#AAA', 'stroke-width'=>"4", 'stroke-opacity'=>"1", 'style'=>"fill: url(#gradientShadow);"}
      %circle.plain{'cx'=>'551', 'cy'=>'0', 'data-value'=>'6', 'r'=>'5'}

      %circle.shadow{'cx'=>'697', 'cy'=>'204', 'r'=>'5', 'stroke'=>'#AAA', 'stroke-width'=>"4", 'stroke-opacity'=>"1", 'style'=>"fill: url(#gradientShadow);"}
      %circle.plain{'cx'=>'697', 'cy'=>'204', 'data-value'=>'1', 'r'=>'5'}
    /labels
    %g.labels.x-labels
      %text{'x'=>'113', 'y'=>'400'}
        111
      %text{'x'=>'259', 'y'=>'400'}
        222
      %text{'x'=>'405', 'y'=>'400'}
        333
      %text{'x'=>'551', 'y'=>'400'}
        444
      %text{'x'=>'697', 'y'=>'400'}
        555
    %g.labels.y-labels
      %text{'x'=>'80', 'y'=>'15'}
        15
      %text{'x'=>'80', 'y'=>'131'}
        10
      %text{'x'=>'80', 'y'=>'248'}
        5
      %text{'x'=>'80', 'y'=>'365'}
        0
      %text{'x'=>'50', 'y'=>'15'}
        txt

%div
  %div.text-right
    /.dropup
    %a.showmebutton{'href'=>'#'}
      ver más
      %span.caret 
  %div.showmecontent{'style' => 'display:none;'}
    %ul.nav.nav-tabs
      - if !@bill.authors.blank?
        %li.active
          %a{'href'=>'#tab01', 'data-toggle'=>'tab'}
            Autores
      - if !@bill.paperworks.blank?
        %li
          %a{'href'=>'#tab02', 'data-toggle'=>'tab'}
            Eventos
      - if !@bill.priorities.blank?
        %li
          %a{'href'=>'#tab03', 'data-toggle'=>'tab'}
            Urgencias
      - if !@bill.reports.blank?
        %li
          %a{'href'=>'#tab04', 'data-toggle'=>'tab'}
            Reportes
      - if !@bill.revisions.blank?
        %li
          %a{'href'=>'#tab05', 'data-toggle'=>'tab'}
            Revisiones
      - if !@bill.documents.blank?
        %li
          %a{'href'=>'#tab06', 'data-toggle'=>'tab'}
            Documentos
      - if !@bill.directives.blank?
        %li
          %a{'href'=>'#tab07', 'data-toggle'=>'tab'}
            Indicaciones

    %div.tab-content
      / autores
      - if !@bill.authors.blank?
        %div.tab-pane.active#tab01
          - @author = @bill.authors
          %ul
            = render partial: "author", collection: @author
      / eventos
      - if !@bill.paperworks.blank?
        %div.tab-pane#tab02
          - @events = @bill.paperworks
          = render partial: "event", collection: @events
      / urgencias
      - if !@bill.priorities.blank?
        %div.tab-pane#tab03
          - @urgencies = @bill.priorities
          = render partial: "urgencie", collection: @urgencies
      / reportes
      - if !@bill.reports.blank?
        %div.tab-pane#tab04
          %table.table
            %tr
              - @reports = @bill.reports
              %td= render partial: "report", collection: @reports
      / modificaciones
      - if !@bill.revisions.blank?
        %div.tab-pane#tab05
          %table.table
            %tr
              - @modifications = @bill.revisions
              %td= render partial: "modification", collection: @modifications
      / documentos
      - if !@bill.documents.blank?
        %div.tab-pane#tab06
          %table.table
            %tr
              - @documents = @bill.documents
              %td= render partial: "document", collection: @documents
      / indicaciones
      - if !@bill.directives.blank?
        %div.tab-pane#tab07
          %table.table
            %tr
              - @instructions = @bill.directives
              %td= render partial: "instruction", collection: @instructions

%div
  %h3.page-header
    Votaciones
  =render partial: "chamber_votes"
  